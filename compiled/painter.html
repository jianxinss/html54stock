<!doctype html >
<html>
    <head>
        <meta http-equiv="content-type" content="text/html;charset=GBK" />
        <title>抽象画笔</title>
    </head>

    <body>
        <canvas id="canvas" width="400" height="300" style="border:1px solid #69c">
        Hey，你Out了，你的浏览器不支持Html5
        </canvas>
        <script>
var dashSize=2;function Painter(a,c,b){this.canvas=document.getElementById(a);if(!this.canvas.getContext){return}this.ctx=this.canvas.getContext("2d");this.data=b;this.paintImplement=c;this.width=this.canvas.width;this.height=this.canvas.height}Painter.prototype={paint:function(){var e=this.paintImplement;var b=this.data;var a=this.ctx;if(typeof e.initialize=="function"){e.initialize(this)}if(e.start){e.start.call(this)}if(typeof e.paintItems=="function"){e.paintItems.call(this)}else{var c=((typeof e.getDataLength=="function")?e.getDataLength.call(this):this.data.length);for(var d=0;d<c;d++){var f=e.getX?e.getX.call(this,d):undefined;var g=e.getY?e.getY.call(this,d):undefined;e.paintItem.call(this,d,f,g)}}if(e.end){e.end.call(this)}},drawHLine:function(a,g,h,e,d,c){var b=this.ctx;b.strokeStyle=a;if(h*10%10==0){h+=0.5}if(c&&c=="dashed"){var f=0;do{this.drawHLine(a,f,h,dashSize,1,"solid");f+=dashSize*2}while(f<e)}else{b.beginPath();b.moveTo(g,h);b.lineTo(g+e,h);b.stroke()}},drawVLine:function(a,g,i,c,f,e){var b=this.ctx;b.strokeStyle=a;if(g*10%10==0){g+=0.5}if(e&&e=="dashed"){var d=0;do{this.drawVLine(a,g,d,dashSize,1);d+=dashSize*2}while(d<c)}else{b.beginPath();b.moveTo(g,i);b.lineTo(g,i+c);b.stroke()}},setData:function(a){this.data=a},setPainterImplement:function(a){this.paintImplement=a}};var painterRects=new Painter("canvas",{paintItem:function(c){var e=this.data[c];var d=this;function b(f){if(typeof f=="function"){return f.call(d)}return f}var a=this.ctx;a.beginPath();if(e.backgroundColor){a.fillStyle=e.backgroundColor}if(e.borderColor){a.strokeStyle=e.borderColor}a.lineWidth=e.lineWidth||1;a.rect(b(e.x),b(e.y),b(e.width),b(e.height));if(e.backgroundColor){a.fill()}if(e.borderColor){a.stroke()}}},[{x:0,y:0,width:function(){return this.width},height:20,backgroundColor:"lightgray",borderWidth:1},{x:0,y:20,width:50,height:function(){return this.height-100},backgroundColor:"yellow",borderWidth:1},{x:52,y:20,width:function(){return this.width-104},height:function(){return this.height-100},backgroundColor:"gray",borderWidth:1},{x:function(){return this.width-50},y:20,width:50,height:function(){return this.height-100},backgroundColor:"#69c",borderWidth:1},{x:52,y:function(){return this.height-80},width:function(){return this.width-104},height:20,backgroundColor:"#69c",borderWidth:1},{x:52,y:function(){return this.height-60},width:function(){return this.width-104},height:60,backgroundColor:"lightgray"}]);painterRects.paint();
</script>
    </body>
</html>
